
# Technical Decisions

## Выбор моделей

### TTS: Piper
**Плюсы:**
- Быстрый инференс на CPU
- Хорошее качество для английского
- Поддержка стриминга
- Легковесная

**Минусы:**
- Ограниченная поддержка языков
- Требует предзагрузки моделей

### ASR: Whisper
**Плюсы:**
- State-of-the-art качество
- Поддержка английского
- Простой API
- Хорошая документация

**Минусы:**
- Тяжелее чем альтернативы
- Медленнее на CPU

## Архитектурные решения

### WebSocket для TTS
Выбран WebSocket вместо HTTP chunked response для:
- Двусторонней коммуникации
- Легкой обработки ошибок
- Поддержки сессий

### Структурное логирование
Использован structlog для:
- Машинно-читаемых логов
- Легкой интеграции с системами мониторинга
- Консистентного формата

## Проблемы и решения

### Проблема: Синхронизация аудио потоков
**Решение:** Фиксированный размер чанков (1024 байта) + сигнал окончания

### Проблема: Обработка таймаутов
**Решение:** Явные таймауты в httpx клиенте + обработка исключений
